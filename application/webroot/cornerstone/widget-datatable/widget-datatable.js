/*
    Cornerstone Framework v2.0

    COPYRIGHT(C) 2012 BY SKTELECOM CO., LTD. ALL RIGHTS RESERVED.
    Released under the Apache License, Version 2.0
*/
!function(a,b){"function"==typeof define&&define.amd?define(["jquery","underscore","backbone","datatable"],b):a.Datatable=b(a.$,a._,a.Backbone)}(window,function(a,b,c){var d="featuredDataTable";return a.fn[d]=function(b){var c={bProcessing:!1,sPaginationType:"bootstrap",sDom:"<'row'<'col col-lg-8 col-12'l><'col col-lg-4 col-12'f>r>t<'row'<'col col-12'i><'col col-12'p>>",oLanguage:{sLengthMenu:"_MENU_ 페이지별 레코드수",sInfo:"총 레코드 수:_TOTAL_ (시작 번호:_START_, 끝 번호:_END_)"}};b=a.extend(!0,c,b);var d=a(this).data("featuredDataTable",a(this).dataTable(b));return d.off("click","tr").on("click","tr",function(){var b=a(this).closest("table").data("featuredDataTable").fnGetData(this);a(this).trigger("itemClick.cs.datatable",{data:b})}),d.data("featuredDataTable")},a.extend(a.fn.dataTableExt.oStdClasses,{sSortAsc:"header headerSortDown",sSortDesc:"header headerSortUp",sSortable:"header"}),a.fn.dataTableExt.oApi.fnPagingInfo=function(a){return{iStart:a._iDisplayStart,iEnd:a.fnDisplayEnd(),iLength:a._iDisplayLength,iTotal:a.fnRecordsTotal(),iFilteredTotal:a.fnRecordsDisplay(),iPage:Math.ceil(a._iDisplayStart/a._iDisplayLength),iTotalPages:Math.ceil(a.fnRecordsDisplay()/a._iDisplayLength)}},a.extend(a.fn.dataTableExt.oPagination,{bootstrap:{fnInit:function(b,c,d){var e=function(a){a.preventDefault(),b.oApi._fnPageChange(b,a.data.action)&&d(b)};a(c).append('<ul class="pagination"><li class="disabled"><a href="#">&laquo;</a></li><li><a href="#">&raquo;</a></li></ul>');var f=a("a",c);a(f[0]).bind("click.DT",{action:"previous"},e),a(f[1]).bind("click.DT",{action:"next"},e)},fnUpdate:function(b,c){var d,e,f,g,h,i=4,j=b.oInstance.fnPagingInfo(),k=b.aanFeatures.p,l=Math.floor(i/2);for(j.iTotalPages<i?(g=1,h=j.iTotalPages):j.iPage<=l?(g=1,h=i):j.iPage>=j.iTotalPages-l?(g=j.iTotalPages-i+1,h=j.iTotalPages):(g=j.iPage-l+1,h=g+i-1),d=0,iLen=k.length;iLen>d;d++){for(a("li:gt(0)",k[d]).filter(":not(:last)").remove(),e=g;h>=e;e++)f=e==j.iPage+1?'class="active"':"",a("<li "+f+'><a href="#" >'+e+"</a></li>").insertBefore(a("li:last",k[d])[0]).bind("click",function(d){d.preventDefault(),b._iDisplayStart=(parseInt(a("a",this).text(),10)-1)*j.iLength,c(b)});0===j.iPage?a("li:first",k[d]).addClass("disabled"):a("li:first",k[d]).removeClass("disabled"),j.iPage===j.iTotalPages-1||0===j.iTotalPages?a("li:last",k[d]).addClass("disabled"):a("li:last",k[d]).removeClass("disabled")}var m=a(".dataTables_filter input");m.hasClass("form-control")||m.addClass("form-control")}}}),a(function(){a("[data-featured=datatable]").each(function(){a(this)[d]({sAjaxSource:a(this).data("datatableBind")})}),a(".dataTables_paginate a").on("click",function(a){a.preventDefault()})}),c&&c.View.extend({model:new c.Model,initialize:function(){this.options.bDestroy=this.options.bDestroy||!0,this.listenTo(this.model,"change",this.render),this.listenTo(this.model,"reset",this.render)},render:function(){return this.options.activeEmpty&&this.$el.empty(),this.options=a.extend({},this.options,this.model.attributes),this.dataTable||(this.dataTable=this.$el.featuredDataTable(this.options).data("featuredDataTable")),this.$el.closest(".dataTables_wrapper").find(".dataTables_filter input").addClass("form-control"),this}})});